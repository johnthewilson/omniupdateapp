!function(){"use strict";angular.module("abookApp",["angular-loading-bar","ui.router","ui.gravatar","ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngMessages"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("home",{url:"/home",templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"addressVm"}).state("child",{url:"/child",templateUrl:"views/child.html",controller:"ChildCtrl",controllerAs:"childVm",params:{results:""}}).state("user",{url:"/user",templateUrl:"views/user.html",controller:"UserCtrl",controllerAs:"userVm",params:{results:""}}).state("success",{url:"/success",templateUrl:"views/form.success.html"}).state("edit",{url:"/edit",templateUrl:"views/edit.form.html",controller:"EditCtrl",controllerAs:"editVm",params:{results:""}}),b.otherwise("/home")}])}(),function(){"use strict";function a(a,b,c){function d(){a.getAll().then(function(a){j.users=a.result,console.log(a.result)},function(a){console.log(a)})}function e(a){console.log("happening"),b.go("edit",{results:a}),console.log(a)}function f(a){a.isChecked!==a.isChecked,a.isChecked?k.push(a.id):k.splice(k.indexOf(a.id),1),console.log(k)}function g(a){console.log("happening"),b.go("user",{results:a}),console.log(a)}function h(){var d=c.when();angular.forEach(k,function(c){d=d.then(function(){l={id:c,apikey:"c11879a4-fdac-4759-98f6-3544b3ff26fa"},console.log("data passed to the controller",l),a.deleteUser(l).then(function(a){console.log(a)})}),d.then(function(){b.go(b.current,{},{reload:!0})})})}function i(c){l.id=c,console.log(l),a.deleteUser(l).then(function(){b.go("home",{},{reload:!0})})}var j=this,k=[],l={apikey:"c11879a4-fdac-4759-98f6-3544b3ff26fa"};d(),j.users=[],j.deleteUser=i,j.deleteUserList=h,j.goListing=g,j.goEditing=e,j.idStore=f,console.log("UserListController")}angular.module("abookApp").controller("MainCtrl",a),a.$inject=["addressService","$state","$q"]}(),function(){"use strict";function a(a,b){var c="c11879a4-fdac-4759-98f6-3544b3ff26fa";return{getAll:function(){var d=b.defer();return a.get("http://front-end.oudemo.com/api/address/list/?apikey="+c).then(function(a){d.resolve(a.data)},function(a){d.reject(a.status)}),d.promise},getUserById:function(d){var e=b.defer();return a.get("http://front-end.oudemo.com/api/address/list/?apikey="+c+"?id="+d).then(function(a){e.resolve(a.data)},function(a){e.reject(a.status)}),e.promise},addUser:function(d){var e=b.defer();return a.post("http://front-end.oudemo.com/api/address/new/?apikey="+c,d).then(function(a){e.resolve(a)},function(a){e.reject(a)}),e.promise},updateUser:function(d){var e=b.defer();return a.post("http://front-end.oudemo.com/api/address/update/?apikey="+c,d).then(function(a){e.resolve(a)},function(a){e.reject(a)}),e.promise},deleteUser:function(d){var e=b.defer();return a.post("http://front-end.oudemo.com/api/address/delete/?apikey="+c,d).then(function(a){e.resolve(a)},function(a){e.reject(a)}),e.promise}}}angular.module("abookApp").factory("addressService",a),a.$inject=["$http","$q"]}(),function(){"use strict";function a(a,b,c){var d=this;d.formModel={apikey:"c11879a4-fdac-4759-98f6-3544b3ff26fa"},d.addUser=function(c){a.addUser(c).then(function(){b.go("success",{},{reload:!0}),d.formModel={apikey:"c11879a4-fdac-4759-98f6-3544b3ff26fa"}}),console.log(c)},console.log("Child Controller")}angular.module("abookApp").controller("ChildCtrl",a),a.$inject=["addressService","$state","$scope"]}(),function(){"use strict";function a(a){var b=this;b.result=a.results}angular.module("abookApp").controller("UserCtrl",a),a.$inject=["$stateParams"]}(),function(){"use strict";function a(a,b,c){var d=this;d.result=b.results,d.formModel={apikey:"c11879a4-fdac-4759-98f6-3544b3ff26fa",address:d.result.address,email:d.result.email,city:d.result.city,state:d.result.state,zipcode:d.result.zipcode||" ",firstName:d.result.firstName,lastName:d.result.lastName,phone:d.result.phone,id:d.result.id},d.updateUser=function(b){console.log("data passed tp",b),a.updateUser(b).then(function(a){console.log(a),c.go("success",{},{reload:!0}),d.formModel={apikey:"c11879a4-fdac-4759-98f6-3544b3ff26fa"}}),console.log(b)},console.log("Child Controller")}angular.module("abookApp").controller("EditCtrl",a),a.$inject=["addressService","$stateParams","$state"]}(),function(){"use strict";function a(){return function(a){var b;return 10===a.length?(b=[],b.push("("),b.push(a.substring(0,3)),b.push(") "),b.push(a.substring(3,6)),b.push("-"),b.push(a.substring(6)),b.join("")):a}}angular.module("abookApp").filter("phone",a),a.$inject=[]}(),angular.module("abookApp").run(["$templateCache",function(a){"use strict";a.put("views/child.html",'<div class="container"><form class="col-md-8 col-md-offset-2" ng-submit="childVm.addUser(childVm.formModel)" novalidate name="empForm"> <div class="form-group"> <label for="fname">First Name</label> <input type="text" class="form-control" id="fname" name="fname" placeholder="Your First Name" ng-model="childVm.formModel.firstName" required minlength="4"> <div class="errors" ng-messages="empForm.name.$error" ng-if="empForm.name.$dirty"> <p ng-message="required">Name is required</p> <p ng-message="minlength">Name must be more than 4 chars.</p> </div> </div> <div class="form-group"> <label for="lname">Last Name</label> <input type="text" class="form-control" id="lname" name="fname" placeholder="Your Last Name" ng-model="childVm.formModel.lastName" required minlength="5"> <div class="errors" ng-messages="empForm.name.$error" ng-if="empForm.name.$dirty"> <p ng-message="required">Name is required</p> <p ng-message="minlength">Name must be more than 4 chars.</p> </div> </div> <div class="form-group"> <label for="email">Email</label> <input type="email" class="form-control" id="email" name="email" placeholder="Your Email" ng-model="childVm.formModel.email" required> <div class="errors" ng-messages="empForm.email.$error" ng-if="empForm.email.$dirty"> <p ng-message="required">Email is required</p> <p ng-message="email">Email is invalid</p> </div> </div> <div class="form-group"> <label for="phone">Phone</label> <input type="text" class="form-control" id="phone" name="phone" placeholder="Your Phone" ng-model="childVm.formModel.phone" required pattern="^[0-9]{10}$"> <div class="errors" ng-messages="empForm.phone.$error" ng-if="empForm.phone.$dirty"> <p ng-message="required">Phone is required</p> <p ng-message="pattern">Phone must have 10 digits</p> </div> </div> <div class="form-group"> <label for="address">Address</label> <input type="text" class="form-control" id="address" name="address" placeholder="Address" ng-model="childVm.formModel.address" required> <div class="errors" ng-messages="empForm.city.$error" ng-if="empForm.city.$dirty"> <p ng-message="required">City is required</p> </div> </div> <div class="form-group"> <label for="city">City</label> <input type="text" class="form-control" id="city" name="city" placeholder="city" ng-model="childVm.formModel.city" required> <div class="errors" ng-messages="empForm.city.$error" ng-if="empForm.city.$dirty"> <p ng-message="required">City is required</p> </div> </div> <div class="form-group"> <label for="state">State</label> <input type="text" class="form-control" id="state" name="state" placeholder="State" ng-model="childVm.formModel.state" required> <div class="errors" ng-messages="empForm.city.$error" ng-if="empForm.city.$dirty"> <p ng-message="required">City is required</p> </div> </div> <div class="form-group"> <label for="zipcode">ZIP Code</label> <input type="text" class="form-control" id="zipcode" name="zipcode" placeholder="ZIPCODE" ng-model="childVm.zipcode" required> <div class="errors" ng-messages="empForm.city.$error" ng-if="empForm.city.$dirty"> <p ng-message="required">City is required</p> </div> </div> <button type="submit" class="btn btn-primary" ng-disabled="empForm.$invalid">Add User</button> <a ui-sref="home"><button class="btn btn-default back-btn"> <i class="glyphicon glyphicon-arrow-left"></i> BACK </button></a> </form> </div>'),a.put("views/edit.form.html",'<div class="container"><form class="col-md-8 col-md-offset-2" ng-submit="editVm.updateUser(editVm.formModel)" novalidate name="empForm"> <div class="form-group"> <label for="fname">First Name</label> <input type="text" class="form-control" id="fname" name="fname" placeholder="Your First Name" ng-model="editVm.formModel.firstName" required minlength="4"> <div class="errors" ng-messages="empForm.name.$error" ng-if="empForm.name.$dirty"> <p ng-message="required">Name is required</p> <p ng-message="minlength">Name must be more than 4 chars.</p> </div> </div> <div class="form-group"> <label for="lname">Last Name</label> <input type="text" class="form-control" id="lname" name="fname" placeholder="Your Last Name" ng-model="editVm.formModel.lastName" required minlength="5"> <div class="errors" ng-messages="empForm.name.$error" ng-if="empForm.name.$dirty"> <p ng-message="required">Name is required</p> <p ng-message="minlength">Name must be more than 4 chars.</p> </div> </div> <div class="form-group"> <label for="email">Email</label> <input type="email" class="form-control" id="email" name="email" placeholder="Your Email" ng-model="editVm.formModel.email" required> <div class="errors" ng-messages="empForm.email.$error" ng-if="empForm.email.$dirty"> <p ng-message="required">Email is required</p> <p ng-message="email">Email is invalid</p> </div> </div> <div class="form-group"> <label for="phone">Phone</label> <input type="text" class="form-control" id="phone" name="phone" placeholder="Your Phone" ng-model="editVm.formModel.phone" required pattern="^[0-9]{10}$"> <div class="errors" ng-messages="empForm.phone.$error" ng-if="empForm.phone.$dirty"> <p ng-message="required">Phone is required</p> <p ng-message="pattern">Phone must have 10 digits</p> </div> </div> <div class="form-group"> <label for="address">Address</label> <input type="text" class="form-control" id="address" name="address" placeholder="Address" ng-model="editVm.formModel.address" required> <div class="errors" ng-messages="empForm.city.$error" ng-if="empForm.city.$dirty"> <p ng-message="required">address is required</p> </div> </div> <div class="form-group"> <label for="city">City</label> <input type="text" class="form-control" id="city" name="city" placeholder="city" ng-model="editVm.formModel.city" required> <div class="errors" ng-messages="empForm.city.$error" ng-if="empForm.city.$dirty"> <p ng-message="required">City is required</p> </div> </div> <div class="form-group"> <label for="state">State</label> <input type="text" class="form-control" id="state" name="state" placeholder="State" ng-model="childVm.formModel.state" required> <div class="errors" ng-messages="empForm.state.$error" ng-if="empForm.state.$dirty"> <p ng-message="required">state is required</p> </div> </div> <div class="form-group"> <label for="zipcode">Zipcode</label> <input type="text" class="form-control" id="zipcode" name="zipcode" placeholder="ZIPCODE" ng-model="editVm.formModel.zipcode" required> <div class="errors" ng-messages="empForm.phone.$error" ng-if="empForm.phone.$dirty"> <p ng-message="required">zipcode is required</p> </div> </div> <button type="submit" class="btn btn-primary" ng-disabled="empForm.$invalid">Update User</button> </form> </div>'),a.put("views/form.success.html",'<div class="container success"> User created. <a ui-sref="home">Home</a> <a ui-sref="child"> Add another User</a> </div>'),a.put("views/main.html",'<div class="row"> <div class="col-md-1 col-md-offset-1 btn btn-default add-user-btn"> <a ui-sref="child"> <i class="glyphicon glyphicon-plus"></i> <i class="glyphicon glyphicon-user"></i> </a></div> <input class="col-md-4 col-md-offset-1 form-control main-search" type="search" placeholder="Search ..." ng-model="addressVm.searchTxt"> </div> <table class="table table-hover"> <thead class="main-row"> <tr> <th></th> <th ng-click="addressVm.sortBy=\'firstName\'; addressVm.sortOrder = !addressVm.sortOrder;">First Name <i class="glyphicon glyphicon-triangle-bottom"></i> </th> <th ng-click="addressVm.sortBy=\'lastName\'; addressVm.sortOrder = !addressVm.sortOrder;">Last Name <i class="glyphicon glyphicon-triangle-bottom"></i></th> <th ng-click="addressVm.sortBy=\'email\'; addressVm.sortOrder = !addressVm.sortOrder;">Email<i class="glyphicon glyphicon-triangle-bottom"></i></th> <th ng-click="addressVm.sortBy=\'address\'; addressVm.sortOrder = !addressVm.sortOrder;">Address<i class="glyphicon glyphicon-triangle-bottom"></i></th> <!--<th ng-click="addressVm.sortBy=\'city\'; addressVm.sortOrder = !addressVm.sortOrder;">City</th>--> <th ng-click="addressVm.sortBy=\'phone\'; addressVm.sortOrder = !addressVm.sortOrder;">Phone<i class="glyphicon glyphicon-triangle-bottom"></i></th> <th><a ng-click="addressVm.deleteUserList()" class="btn btn-default btn-xs delete-btn">DELETE SELECTED</a></th> </tr> </thead> <tbody> <tr class="user-card" ng-repeat="emp in addressVm.users | filter:addressVm.email.searchTxt| filter:addressVm.lastName.searchTxt | filter:addressVm.firstName.searchTxt | filter:addressVm.searchTxt | orderBy:addressVm.sortBy:addressVm.sortOrder"> <!--<td><span class="glyphicon glyphicon-remove" ng-click="addressVm.deleteEmployee($index)"><img class="img-circle" ng-src="https://avatars.io/facebook/{{emp.firstName}}/small" alt=""></span></td>--> <td><a ng-click="addressVm.goListing(emp)"><img class="img-circle pl" ng-src="https://avatars.io/facebook/{{emp.firstName}}/small" alt=""> </a></td> <td class="name-col"> <a ng-click="addressVm.goListing(emp)">{{emp.firstName}}</a> </td> <td><a ng-click="addressVm.goListing(emp)">{{emp.lastName}}</a> </td> <td>{{emp.email}}</td> <td>{{emp.address}}<br>{{emp.state}}</td> <td>{{emp.phone | phone}}</td> <td class="row"> <input type="checkbox" ng-click="addressVm.idStore(emp)" id="checkbox" ng-model="emp.isChecked" value="checkbox"> <label for="checkbox"></label> <a ng-click="addressVm.goEditing(emp)" class="btn btn-default btn-xs edit-btn">Edit</a> <a ng-click="addressVm.deleteUser(emp.id)" class="btn btn-default btn-xs delete-btn">Delete</a> </td> </tr> </tbody> </table>'),a.put("views/user.html",'<div class="container single-user-card"> <h4><img class="img-circle pl" ng-src="https://avatars.io/facebook/{{userVm.result.firstName}}/small" alt=""><br>{{userVm.result.firstName}}{{userVm.result.lastName}}</h4> <lead>{{userVm.result.address}}{{userVm.result.state}}{{userVm.result.zipcode}}</lead> <p>ph:{{userVm.result.phone}}</p> <p>{{userVm.result.email}}</p> <a ui-sref="home"><button class="btn btn-default back-btn"> <i class="glyphicon glyphicon-arrow-left"></i> BACK </button></a> </div>')}]);